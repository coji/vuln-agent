# VulnAgent Claude Code Subagent

このディレクトリには、VulnAgentの機能をClaude Codeのsubagentとして実装したファイルが含まれています。

## vuln-scanner サブエージェント

`vuln-scanner.md`は、Webアプリケーションのセキュリティ脆弱性を検出するための専門的なサブエージェントです。

### 主な特徴

- **100% LLMネイティブ**: 事前定義されたルールやパターンを使用せず、AIによる知的な分析を実行
- **包括的なセキュリティテスト**: XSS、SQLインジェクション、認証バイパスなど、一般的なWeb脆弱性を検出
- **適応的なアプローチ**: アプリケーションのコンテキストに基づいてテスト戦略を動的に調整
- **詳細なレポート**: 発見された脆弱性について、再現手順と修正方法を含む包括的なレポートを生成

### 使用方法

#### 1. サブエージェントのインストール

プロジェクトレベルでインストールする場合（推奨）:
```bash
# このプロジェクトのルートディレクトリで
cp .claude/agents/vuln-scanner.md .claude/agents/
```

ユーザーレベルでインストールする場合:
```bash
# すべてのプロジェクトで使用可能にする
mkdir -p ~/.claude/agents
cp .claude/agents/vuln-scanner.md ~/.claude/agents/
```

#### 2. 基本的な使用例

```bash
# Claude Codeでの使用例
claude "https://example.comのセキュリティをチェックして"
# → vuln-scannerが自動的に起動し、セキュリティ分析を開始

claude "このWebアプリケーションの脆弱性をスキャンして"
# → 現在のプロジェクトまたは指定されたURLをスキャン

claude "XSSの脆弱性がないか確認して"
# → 特定の脆弱性タイプに焦点を当てた分析
```

#### 3. プロアクティブ実行

以下のキーワードが含まれる場合、自動的にvuln-scannerが起動します:
- セキュリティテスト
- 脆弱性スキャン
- ペネトレーションテスト
- Webセキュリティ分析
- 脆弱性のチェック

### 出力形式

vuln-scannerは以下の形式で脆弱性を報告します:

```markdown
## Vulnerability: [脆弱性タイプ]

**Severity**: Critical/High/Medium/Low
**Endpoint**: [URL/パラメータ]
**Description**: [脆弱性の説明]

### Proof of Concept
[再現手順]

### Evidence
[レスポンスの抜粋、スクリーンショット等]

### Impact
[ビジネスへの影響]

### Remediation
[具体的な修正方法]
```

### 注意事項

- **認可されたターゲットのみ**: 明示的に許可されたWebサイトに対してのみセキュリティテストを実行してください
- **破壊的テストの回避**: アプリケーションに害を与える可能性のあるテストは避けます
- **レート制限の尊重**: ターゲットに過度な負荷をかけないよう配慮します

### カスタマイズ

`vuln-scanner.md`ファイルを編集することで、以下をカスタマイズできます:

1. **ツールの権限**: YAMLフロントマターの`tools`セクションを編集
2. **テスト戦略**: システムプロンプト内のフェーズやアプローチを調整
3. **プロアクティブ条件**: `description`フィールドでトリガーキーワードを変更

### トラブルシューティング

- サブエージェントが起動しない場合は、`claude /agents`コマンドで正しくインストールされているか確認
- 特定のツールが使用できない場合は、YAMLフロントマターのtools設定を確認

### 貢献

改善案やバグ報告は、[VulnAgentリポジトリ](https://github.com/coji/vuln-agent)のIssuesでお願いします。
